# –î–æ—Å—Ç—É–ø–Ω—ã–µ Endpoints –≤ Swagger UI

## üéØ –û—Ç–∫—Ä—ã—Ç—å Swagger UI
**URL**: http://localhost:3000/api-docs

## üìã BeamDeflections (–ó–∞—è–≤–∫–∏) - –ù–æ–≤—ã–µ Endpoints

### 1. **GET /api/beam_deflections** - –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ ‚ú® NEW
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫
- –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏
- –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ –∑–∞—è–≤–∫–∏
- –ò—Å–∫–ª—é—á–∞–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–∏ (draft) –∏ —É–¥–∞–ª—ë–Ω–Ω—ã–µ

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (formed, completed, rejected)
- `from` - –¥–∞—Ç–∞ –æ—Ç (YYYY-MM-DD)
- `to` - –¥–∞—Ç–∞ –¥–æ (YYYY-MM-DD)
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `per_page` - —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å 100)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:
```
GET /api/beam_deflections?status=formed&page=1&per_page=20
```

**Response**:
```json
{
  "beam_deflections": [
    {
      "id": 1,
      "status": "formed",
      "formed_at": "2024-01-01T10:00:00Z",
      "length_m": 5.0,
      "udl_kn_m": 10.0,
      "creator_login": "user@example.com",
      ...
    }
  ],
  "meta": {
    "current_page": 1,
    "total_pages": 3,
    "total_count": 45
  }
}
```

---

### 2. **GET /api/beam_deflections/{id}** - –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ ‚ú® NEW
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞—è–≤–∫–µ

**Response –≤–∫–ª—é—á–∞–µ—Ç**:
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞—è–≤–∫–∏ (length_m, udl_kn_m, note)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–µ
- –°–ø–∏—Å–æ–∫ –±–∞–ª–æ–∫ —Å —Ä–∞—Å—á—ë—Ç–∞–º–∏ (`items`)
- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞ (`result_deflection_mm`)
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ—Ä–º–µ (`within_norm`)

---

### 3. **PUT /api/beam_deflections/{id}** - –û–±–Ω–æ–≤–∏—Ç—å –∑–∞—è–≤–∫—É ‚ú® NEW
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞—è–≤–∫–∏ (—Ç–æ–ª—å–∫–æ draft –∏–ª–∏ formed)

**Request Body**:
```json
{
  "beam_deflection": {
    "length_m": 6.0,
    "udl_kn_m": 12.0,
    "note": "–û–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ"
  }
}
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å
- –¢–æ–ª—å–∫–æ –≤ —Å—Ç–∞—Ç—É—Å–∞—Ö draft –∏–ª–∏ formed

---

### 4. **DELETE /api/beam_deflections/{id}** - –£–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∫—É ‚ú® NEW
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ (soft delete)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å
- –ó–∞—è–≤–∫–∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ deleted, –Ω–æ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –ë–î

---

### 5. **PUT /api/beam_deflections/{id}/form** - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ —Å—Ç–∞—Ç—É—Å "formed" (–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- –ó–∞—è–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ draft
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã length_m –∏ udl_kn_m
- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –±–∞–ª–∫–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ

---

### 6. **PUT /api/beam_deflections/{id}/complete** - –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É (–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å—á—ë—Ç—ã –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞—è–≤–∫—É

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø—Ä–æ–≥–∏–± –¥–ª—è –∫–∞–∂–¥–æ–π –±–∞–ª–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ—Ä–º–∞–º
- –ó–∞—è–≤–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å completed

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- –¢–æ–ª—å–∫–æ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
- –ó–∞—è–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ formed

---

### 7. **PUT /api/beam_deflections/{id}/reject** - –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É (–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä) ‚ú® NEW
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- –¢–æ–ª—å–∫–æ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
- –ó–∞—è–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ formed

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Swagger

1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ **POST /api/auth/sign_in** –∏–ª–∏ **POST /api/auth/sign_up**
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **üîì Authorize** –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω (–ë–ï–ó "Bearer ")
4. –ù–∞–∂–º–∏—Ç–µ "Authorize" ‚Üí "Close"
5. –¢–µ–ø–µ—Ä—å üîí - –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

---

## üìä Workflow –∑–∞—è–≤–∫–∏ (BeamDeflection State Machine)

```
draft (—á–µ—Ä–Ω–æ–≤–∏–∫)
  ‚Üì PUT /form (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
formed (–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
  ‚Üì PUT /complete (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä)  OR  ‚Üì PUT /reject (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä)
completed (–æ–¥–æ–±—Ä–µ–Ω–æ)              rejected (–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ)
```

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### –®–∞–≥ 1: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
1. **POST /api/auth/sign_up** - —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `token`
3. Authorize –≤ Swagger

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –±–∞–ª–∫—É –≤ –∫–æ—Ä–∑–∏–Ω—É
1. **GET /api/beams** - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–∞–ª–∫–∏
2. –í—ã–±—Ä–∞—Ç—å beam_id
3. **POST /api/beam_deflection_beams** - –¥–æ–±–∞–≤–∏—Ç—å –≤ —á–µ—Ä–Ω–æ–≤–∏–∫

### –®–∞–≥ 3: –ù–∞–π—Ç–∏ ID —á–µ—Ä–Ω–æ–≤–∏–∫–∞
1. **GET /api/beam_deflections/cart_badge** - –ø–æ–ª—É—á–∏—Ç—å ID —Ç–µ–∫—É—â–µ–≥–æ —á–µ—Ä–Ω–æ–≤–∏–∫–∞

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
1. **PUT /api/beam_deflections/{draft_id}** - –∑–∞–ø–æ–ª–Ω–∏—Ç—å length_m –∏ udl_kn_m

### –®–∞–≥ 5: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
1. **PUT /api/beam_deflections/{draft_id}/form**

### –®–∞–≥ 6: –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞—è–≤–∫–∏
1. **GET /api/beam_deflections** - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞—è–≤–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "formed"

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Swagger

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `swagger.yaml`:
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É Swagger UI (F5)
2. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ: http://localhost:3000/api-docs
3. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **BeamDeflections**
4. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤—Å–µ 7 endpoints

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤ Swagger UI –µ—Å—Ç—å –≤—Å–µ endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—è–≤–∫–∞–º–∏! üéâ
