# рџЋЇ Р“РѕС‚РѕРІРѕ Рє РґРµРјРѕРЅСЃС‚СЂР°С†РёРё!

## вњ… Р§С‚Рѕ РІС‹РїРѕР»РЅРµРЅРѕ

### РћСЃРЅРѕРІРЅР°СЏ С„СѓРЅРєС†РёРѕРЅР°Р»СЊРЅРѕСЃС‚СЊ
- вњ… РњРѕРґРµСЂР°С‚РѕСЂ РјРѕР¶РµС‚ РїСЂРѕСЃРјР°С‚СЂРёРІР°С‚СЊ **РІСЃРµ РґСЂР°С„С‚С‹** С‡РµСЂРµР· `GET /api/beam_deflections?status=draft`
- вњ… РСЃРїСЂР°РІР»РµРЅР° РєСЂРёС‚РёС‡РµСЃРєР°СЏ РѕС€РёР±РєР° РїР°РіРёРЅР°С†РёРё (РІРѕР·РІСЂР°С‰Р°Р»РѕСЃСЊ 1 СЌР»РµРјРµРЅС‚ РІРјРµСЃС‚Рѕ 20)
- вњ… РћР±С‹С‡РЅС‹Рµ РїРѕР»СЊР·РѕРІР°С‚РµР»Рё РќР• РІРёРґСЏС‚ С‡СѓР¶РёРµ РґСЂР°С„С‚С‹
- вњ… JWT blacklist РІ Redis СЂР°Р±РѕС‚Р°РµС‚ РєРѕСЂСЂРµРєС‚РЅРѕ

### РџРѕРґРіРѕС‚РѕРІРєР° Рє РґРµРјРѕРЅСЃС‚СЂР°С†РёРё
- вњ… РЎРѕР·РґР°РЅС‹ С‚РµСЃС‚РѕРІС‹Рµ РїРѕР»СЊР·РѕРІР°С‚РµР»Рё Рё РґР°РЅРЅС‹Рµ
- вњ… Swagger UI РґРѕСЃС‚СѓРїРµРЅ Рё РЅР°СЃС‚СЂРѕРµРЅ
- вњ… Redis СЃРѕРґРµСЂР¶РёС‚ blacklist С‚РѕРєРµРЅРѕРІ
- вњ… Р’СЃРµ endpoints РїСЂРѕС‚РµСЃС‚РёСЂРѕРІР°РЅС‹

---

## рџ“Ѓ Р¤Р°Р№Р»С‹ РґР»СЏ РґРµРјРѕРЅСЃС‚СЂР°С†РёРё

1. **DEMO_READY.md** в­ђ - Р§РµРєР»РёСЃС‚ Рё Р±С‹СЃС‚СЂС‹Р№ СЃС‚Р°СЂС‚
2. **DEMO_GUIDE.md** - РџРѕРґСЂРѕР±РЅРѕРµ СЂСѓРєРѕРІРѕРґСЃС‚РІРѕ СЃ РѕРїРёСЃР°РЅРёРµРј РІСЃРµС… 15 С€Р°РіРѕРІ
3. **utilities/docs/INSOMNIA_GUIDE.md** рџљЂ - РџРѕР»РЅС‹Р№ РіР°Р№Рґ РїРѕ СЂР°Р±РѕС‚Рµ СЃ Insomnia/Postman
4. **QUICK_DEMO_COMMANDS.md** - РЁРїР°СЂРіР°Р»РєР° СЃ РєРѕРјР°РЅРґР°РјРё
5. **Insomnia_Collection.json** - РљРѕР»Р»РµРєС†РёСЏ РґР»СЏ РёРјРїРѕСЂС‚Р°
6. **utilities/scripts/prepare_demo.rb** - РЎРєСЂРёРїС‚ РґР»СЏ РїРµСЂРµСЃРѕР·РґР°РЅРёСЏ РґР°РЅРЅС‹С…

---

## рџљЂ РќР°С‡Р°С‚СЊ РґРµРјРѕРЅСЃС‚СЂР°С†РёСЋ

### Р’Р°СЂРёР°РЅС‚ 1: РџРѕР»РЅРѕРµ СЂСѓРєРѕРІРѕРґСЃС‚РІРѕ
РћС‚РєСЂРѕР№С‚Рµ С„Р°Р№Р» **DEMO_GUIDE.md** - С‚Р°Рј СЂР°СЃРїРёСЃР°РЅС‹ РІСЃРµ 15 С€Р°РіРѕРІ СЃ РѕР¶РёРґР°РµРјС‹РјРё СЂРµР·СѓР»СЊС‚Р°С‚Р°РјРё Рё РЅРѕРјРµСЂР°РјРё СЃРєСЂРёРЅС€РѕС‚РѕРІ.

### Р’Р°СЂРёР°РЅС‚ 2: Р‘С‹СЃС‚СЂС‹Р№ СЃС‚Р°СЂС‚
1. РћС‚РєСЂРѕР№С‚Рµ **DEMO_READY.md**
2. РСЃРїРѕР»СЊР·СѓР№С‚Рµ С‡РµРєР»РёСЃС‚ РґР»СЏ РїРѕС€Р°РіРѕРІРѕРіРѕ РїСЂРѕС…РѕР¶РґРµРЅРёСЏ
3. Р’СЃРµ РіРѕС‚РѕРІС‹Рµ С‚РѕРєРµРЅС‹ Рё РєРѕРјР°РЅРґС‹ СѓР¶Рµ С‚Р°Рј

### Р’Р°СЂРёР°РЅС‚ 3: Insomnia/Postman (Р РµРєРѕРјРµРЅРґСѓРµС‚СЃСЏ!)
1. РћС‚РєСЂРѕР№С‚Рµ **utilities/docs/INSOMNIA_GUIDE.md** рџљЂ - РїРѕР»РЅРѕРµ СЂСѓРєРѕРІРѕРґСЃС‚РІРѕ
2. РРјРїРѕСЂС‚РёСЂСѓР№С‚Рµ **Insomnia_Collection.json** (РёРЅСЃС‚СЂСѓРєС†РёРё РІ РіР°Р№РґРµ)
3. Р’С‹РїРѕР»РЅСЏР№С‚Рµ requests РїРѕ РїРѕСЂСЏРґРєСѓ (1в†’2в†’3в†’...в†’10)
4. Р’СЃРµ С‚РѕРєРµРЅС‹ СѓР¶Рµ РЅР°СЃС‚СЂРѕРµРЅС‹
5. 8 СЃРєСЂРёРЅС€РѕС‚РѕРІ РґР»СЏ РўР— РѕРїРёСЃР°РЅС‹ РІ РіР°Р№РґРµ

---

## рџ‘Ґ РЈС‡РµС‚РЅС‹Рµ РґР°РЅРЅС‹Рµ

```
РћР±С‹С‡РЅС‹Р№ РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ:
  Email: user@demo.com
  Password: password123

РњРѕРґРµСЂР°С‚РѕСЂ:
  Email: moderator@demo.com
  Password: password123
```

---

## рџ”‘ Р“РѕС‚РѕРІС‹Рµ JWT С‚РѕРєРµРЅС‹ (24 С‡Р°СЃР°)

**User:**
```
eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjozOSwiZXhwIjoxNzY0NTI5NTUwfQ.h61r9z0Rud3pyUVrYoNrO88wr-xf6Vq8Z8iJN1FFQV4
```

**Moderator:**
```
eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjo0MCwiZXhwIjoxNzY0NTI5NTUwfQ.74Ud9dJZ1pPFzydT-yMWA-o5eqH0nOYmNlKiVtZJLl0
```

---

## рџЊђ URLs

- **Swagger UI**: http://localhost:3000/api-docs
- **Web UI**: http://localhost:3000
- **API**: http://localhost:3000/api

---

## рџ“Љ Р”Р°РЅРЅС‹Рµ РґР»СЏ РґРµРјРѕРЅСЃС‚СЂР°С†РёРё

- **Formed Request ID** РґР»СЏ completion: `52`
- **Draft Requests**: 4 С€С‚СѓРєРё РѕС‚ СЂР°Р·РЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№
- **Beams**: 2 С€С‚СѓРєРё (Wooden, Steel)

---

## рџЋ¬ РџРѕСЂСЏРґРѕРє РїРѕРєР°Р·Р° (РєСЂР°С‚РєРѕ)

1. **Swagger**: РђСѓС‚РµРЅС‚РёС„РёРєР°С†РёСЏ (РёРЅРєРѕРіРЅРёС‚Рѕ)
2. **Swagger**: GET СЃРїРёСЃРѕРє Р·Р°СЏРІРѕРє
3. **Browser**: РЎРєРѕРїРёСЂРѕРІР°С‚СЊ JWT РёР· Response
4. **Insomnia**: GET Р±РµР· С‚РѕРєРµРЅР° в†’ 401
5. **Insomnia**: GET СЃ user в†’ С‚РѕР»СЊРєРѕ СЃРІРѕРё
6. **Insomnia**: PUT complete СЃ user в†’ 403
7. **Insomnia**: Р’РѕР№С‚Рё РєР°Рє moderator
8. **Insomnia**: PUT complete СЃ moderator в†’ 200 вњ…
9. **Insomnia**: GET РІСЃРµ Р·Р°СЏРІРєРё (moderator)
10. **Insomnia**: GET РІСЃРµ РґСЂР°С„С‚С‹ (moderator) вњЁ **РќРћР’РћР•**
11. **CMD**: Redis blacklist РєР»СЋС‡Рё
12. **Insomnia**: Sign out (СЃРѕР·РґР°С‚СЊ blacklist)
13. **CMD**: РџСЂРѕРІРµСЂРёС‚СЊ РЅРѕРІС‹Р№ РєР»СЋС‡
14. **Insomnia**: РСЃРїРѕР»СЊР·РѕРІР°С‚СЊ blacklisted С‚РѕРєРµРЅ в†’ 401
15. **CMD**: TTL РєР»СЋС‡Р°

---

## рџ”Ќ Р‘С‹СЃС‚СЂС‹Рµ РєРѕРјР°РЅРґС‹

### Redis
```bash
# Р’СЃРµ blacklist РєР»СЋС‡Рё
docker-compose exec redis redis-cli KEYS "jwt:blacklist:*"

# TTL РєР»СЋС‡Р°
docker-compose exec redis redis-cli TTL "jwt:blacklist:<hash>"
```

### Rails
```bash
# РџРµСЂРµСЃРѕР·РґР°С‚СЊ РґР°РЅРЅС‹Рµ
docker-compose exec web bin/rails runner utilities/scripts/prepare_demo.rb

# РЎС‚Р°С‚РёСЃС‚РёРєР°
docker-compose exec web bin/rails runner "
puts 'Drafts: ' + BeamDeflection.draft.count.to_s
"
```

---

## вњЁ РќРѕРІР°СЏ С„СѓРЅРєС†РёРѕРЅР°Р»СЊРЅРѕСЃС‚СЊ

### РњРѕРґРµСЂР°С‚РѕСЂ РІРёРґРёС‚ РІСЃРµ РґСЂР°С„С‚С‹

**Endpoint:**
```
GET /api/beam_deflections?status=draft
Authorization: Bearer <moderator_token>
```

**Р РµР·СѓР»СЊС‚Р°С‚:**
- HTTP 200 OK
- Р’СЃРµ РґСЂР°С„С‚С‹ РѕС‚ РІСЃРµС… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№
- РСЃРїРѕР»СЊР·СѓРµС‚ РёСЃРїСЂР°РІР»РµРЅРЅСѓСЋ РїР°РіРёРЅР°С†РёСЋ (20 РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ)

**Р‘РµР·РѕРїР°СЃРЅРѕСЃС‚СЊ:**
- РћР±С‹С‡РЅС‹Рµ РїРѕР»СЊР·РѕРІР°С‚РµР»Рё РќР• РІРёРґСЏС‚ С‡СѓР¶РёРµ РґСЂР°С„С‚С‹
- РўСЂРµР±СѓРµС‚СЃСЏ СЂРѕР»СЊ РјРѕРґРµСЂР°С‚РѕСЂР°

---

## рџ“ё 15 РЎРєСЂРёРЅС€РѕС‚РѕРІ РґР»СЏ РўР— 2025

Р’СЃРµ РѕРїРёСЃР°РЅС‹ РІ **DEMO_GUIDE.md** СЃ РѕР¶РёРґР°РµРјС‹РјРё СЂРµР·СѓР»СЊС‚Р°С‚Р°РјРё:

1-3: Swagger Р°СѓС‚РµРЅС‚РёС„РёРєР°С†РёСЏ Рё СЃРїРёСЃРѕРє Р·Р°СЏРІРѕРє
4-6: Insomnia - РґРѕСЃС‚СѓРї РіРѕСЃС‚СЏ Рё РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
7-9: Insomnia - РјРѕРґРµСЂР°С‚РѕСЂ Рё **РЅРѕРІР°СЏ С„СѓРЅРєС†РёСЏ РґСЂР°С„С‚РѕРІ** вњЁ
10-15: Redis blacklist Рё JWT

---

## вљЎ РўРµСЃС‚С‹ РїСЂРѕР№РґРµРЅС‹

```
вњ“ GET /api/beam_deflections (no auth) в†’ 401
вњ“ GET /api/beam_deflections (user) в†’ 200 (2 requests)
вњ“ GET /api/beam_deflections?status=draft (moderator) в†’ 200 (4 drafts)
вњЁ NEW FEATURE WORKING!
```

---

## рџЋЇ РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё

1. РћС‚РєСЂРѕР№С‚Рµ **DEMO_READY.md** РґР»СЏ С‡РµРєР»РёСЃС‚Р°
2. РћС‚РєСЂРѕР№С‚Рµ **DEMO_GUIDE.md** РґР»СЏ РїРѕРґСЂРѕР±РЅС‹С… РёРЅСЃС‚СЂСѓРєС†РёР№
3. РРјРїРѕСЂС‚РёСЂСѓР№С‚Рµ **Insomnia_Collection.json**
4. РќР°С‡РёРЅР°Р№С‚Рµ РґРµРјРѕРЅСЃС‚СЂР°С†РёСЋ! рџљЂ

---

**Р’СЃРµ РіРѕС‚РѕРІРѕ! РЈРґР°С‡РЅРѕР№ РґРµРјРѕРЅСЃС‚СЂР°С†РёРё! рџЋ‰**


